{"version":3,"sources":["../node_modules/idb/build/esm/wrap-idb-value.js","../node_modules/idb/build/esm/index.js","js/utility.js","js/header.js","main.js"],"names":["instanceOfAny","object","constructors","some","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBTransaction","getCursorAdvanceMethods","prototype","advance","continue","continuePrimaryKey","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","Promise","resolve","reject","unlisten","removeEventListener","success","error","wrap","result","addEventListener","then","value","set","catch","cacheDonePromiseForTransaction","tx","has","done","complete","DOMException","idbProxyTraps","get","target","prop","receiver","objectStoreNames","undefined","objectStore","replaceTraps","callback","wrapFunction","func","transaction","storeNames","args","call","unwrap","sort","includes","apply","transformCachableValue","Proxy","IDBRequest","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","event","oldVersion","newVersion","db","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","method","storeName","store","index","shift","all","oldTraps","dbPromise","contains","console","log","createObjectStore","writeData","st","data","put","readAllData","getAll","setStore","key","val","getItem","getAllKeys","deleteItem","delete","clearStore","clear","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","dataURItoBlob","dataURI","byteString","split","mimeString","ab","ArrayBuffer","ia","blob","Blob","type","Header","constructor","headerTitleBtn","document","getElementById","headerTitleArrow","getElementsByClassName","headerSocial","headerTitleBackdrop","headerNavBackdrop","navBtn","navList","navItems","querySelectorAll","URL","initHeader","toggleHeaderTitle","toggleNav","forEach","item","classList","toggle","remove","add","deferredPrompt","installBtn","askNotificationBtn","URL_SUBSCRIPTIONS","header","preventDefault","prompt","userChoice","choiceResult","outcome","displayNotificationEnabled","navigator","options","body","icon","image","dir","lang","vibrate","badge","tag","renotify","dateOfArrival","Date","now","primaryKey","actions","action","title","serviceWorker","ready","swreg","showNotification","configurePushSubcription","registration","pushManager","getSubscription","sub","vapidPublicKey","convertedVapidPublicKey","subscribe","userVisibleOnly","applicationServerKey","newSub","fetch","headers","JSON","stringify","response","ok","askNotificationPermission","Notification","requestPermission"],"mappings":";;AIAA;;AACA;;AAEA,IAAI2K,cAAJ;ADHO,ACIP,MDJaxB,ACIPyB,MDJC,CAAa,GCIJ,GAAGtB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;ADHEH,ACIF,EDJEA,ICIIyB,ODJO,GAAG,QCIQ,GAAGvB,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,CAA3B;AJLA,AGEI,ACIJ,MJNMvJ,AIMA8K,GDJGzB,UHFU,GAAG,CAACpJ,AGEnB,ACImB,GDJGqJ,ACIA,GJNJ,EAASpJ,GGEG,CAACqJ,QHFb,KAA0BrJ,CGEtB,CAAwB,UHFU,CAACC,GGEnC,CHFsB,AGE5C,CHF+DC,AIMnE,CJNkE,CIQlE,GJRyEH,MAAM,YAAYG,CAA3C,CAAhD;AGGI,SAAKoJ,gBAAL,GAAwBF,QAAQ,CAACG,sBAAT,CAAgC,sBAAhC,EAAwD,CAAxD,CAAxB;AACA,ACKJ,MAAMsB,GDLGrB,GCKG,GAAG,IAAIP,EDLf,GAAoBG,QAAQ,CAACC,ACKlB,EAAf,YDLwB,CAAwB,eAAxB,CAApB;AHFJ,AGGI,ACKJwB,IJRI1K,EIQE,CAAC6J,EDLEP,QCKT,IJRA,AIUA,ODPI,GAA2BL,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,CAA3B;AHFJ,AGGI,ACOJ,IJVIjJ,KGGKsJ,eHHT,EACA,AGEI,GAAyBN,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,CAAzB;AACA,ACOJ,SDPSM,MAAL,GAAcP,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAd;AHFJ,AGGI,ADRJ,AEeA,SJVShJ,AGGAuJ,OAAL,GAAeR,QAAQ,CAACC,CHH5B,GAAgC,UGGb,CAAwB,UAAxB,CAAf;AHFA,AGGA,ACOJ,SJVYlJ,AGGH0J,QAAL,GAAgB,KAAKD,CHHI,KACpBzJ,CGEW,CAAa2J,eHFP,CGEN,CAA8B,CHFrB,CACjBxJ,WADiB,EAEjBC,SGAQ,CAAhB,IHFyB,EAGjBC,QAHiB,EAIjBC,SAJiB,EAKjBC,cALiB,CADA,CAAzB;AAQH,AGJG,ADRJ,AEeA,EJFA,OGLSqJ,GAAL,GAAW,gCAAX;AACD,ADRH,AEgBA,MFhBM1D,SAAS,GAAG,iBAAO,aAAP,EAAsB,CAAtB,EAAyB;AACvC5B,EAAAA,OAAO,CAACS,EAAD,EAAK;ADJhB,ADgBA,AGHE8E,ADRM,AEeRhC,EDPEgC,ICOI,CAAC9H,CFfK,CFWHvB,AEXIuE,EAAE,CCQH,ADRIhC,GCQD,QCOf,CAAwB,IFfX,CAAoBoD,GFWjC,GAAmC,EEXtB,CAA6B,OAA7B,AEeb,CFfQ,CEewCvB,CFfI,IEeL,IAAW;AJHtD,AGHA,ADRQwB,AEeR,MFfQA,GFWAnG,AGHH+I,IDRU,CAAC3C,GAAR,CAAY,KCQpB,CAAoBtE,KHGQ,KACvB9B,MGJL,CAAqC,OAArC,EAA8C,IHIrB,EGJ2B,ADR5C,CFYoB,CACpBK,SAAS,CAACG,SAAV,CAAoBC,OADA,EAEpBJ,SAAS,CAACG,SAAV,CAAoBE,QAFA,EAGpBL,SAAS,CAACG,SAAV,CAAoBG,kBAHA,CADA,CAA5B;ACdJ,ADoBC,AGRK,ADRMmE,AEeRH,EAAAA,IFfQG,CEeH,CFfK,AEeJ4F,CFfKrE,ECQJwD,WCOP,IFfQ,CAAqB,CCQ3B,MDRM;ADHZ,AEYK,ADRI,AEeLQ,EAAAA,GDTA,WCSc,GAAG1F,KAAjB;AHlBJ,ADmBA,AGNI,ACMA,MJAE/D,GGNGyI,ACME,KAAP,QJAkB,GAAG,GGNrB,CHMyBxI,AGNAiB,OHMJ,EAAzB,OGNI,CAA0C,OAA1C,EAAmD,MAAM;AFZ7D,ADmBA,AGNM,ADVE,AEgBP,CALD,GAOA,EJFMhB,EEhBM,CAACgE,ECUF+E,ADVI,CAAC/G,YFgBQ,GAAG,CGNrB,ADVO,CAAoBoD,EFgBFrF,MEhBlB,CFgBc,AEhBe,EFgB1C,UEhBa,CAAL,EAAiD;ADFzD,ADmBA,AGNK,ADVO,KCQR,CHQEE,wBAAwB,GAAG,IAAIF,OAAJ,EAAjC;AClBA,ADmBA,AGLI,ADXQiE,AEiBZwF,MJDMtJ,AEhBM8D,EAAE,CCWLwE,ADXMjD,CEiBL,CAACvE,SJDS,GAAG,GGLnB,ADXQ,CFgBejB,AGLAiB,ADXM,AEiBjC,CAA4B,MJDL,CICvB,CJDA,CICqC,EFjBzB,ICWR,ACMuC,CDNC,OAAxC,EAAiD,MAAM;AFb3D,ADmBA,AGLM,ADXG,AEiBLqE,EAAAA,IJDElF,GICK,CAACmF,CDND0D,ECMP,CAAY,MDNV,OHKqB,GAAG,CIC1B,GJD8BjJ,OAAJ,EAA9B;AClBA,AEcK,ADXA,KCSD,IFZKoD,MAAT,CAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;AAAEC,AEgB7B,ACIA,EHpB6BA,IGoBzBiG,GHpBuB,AEgBtBd,MAAL,CAAYzH,ICIZ,EAAoB,UDJpB,CAA6B,OAA7B,EAAsC,MAAM;AFhBNuC,ADmB1C,AGFM,ADxBqC,AE4BnCgG,CF5BU,CDOwBhG,ACP1C,EE4BQgG,KHrBuB,ADmBtBnJ,EGFE4I,OCIW,CAACa,CDJjB,KHEN,AIEQ,CJFkBxJ,OAA1B,EAAmC;ACnBgBmD,ADoB/C,AGFC,ACKG+F,EHvB2C/F,EGuB3C+F,CDPJ,GHIMjJ,ECpBqB,KDoBd,GAAG,AIGE,CAACwJ,GJHCvJ,OAAJ,AIGZ,CJHwB,AIGEU,CJHDT,GIGzB,CAAgCuJ,GJHR,EAAUtJ,MAAV,CIGO,IJHc,AIGI;AHvBIgD,ADqBrD,AGDJ,ADdG,AEkBK4B,EHxBiD5B,IGwBjD4B,GDJHsD,CHCKjI,GIGK,CAAC4E,CFlBEE,ECclB,ACIQ,CJHU,AGDJyD,ACIMc,GJHC,GEflB,CCcH,ADd4BtE,CCcNyD,CHCK,AEfxB,EAA6BxD,CCcN,ACIM,CAACsE,EFlB9B,CCeDd,CDfoC,GCehC,ACGE,CDHDlI,gBAAL,CAAsB,OAAtB,EAA+B,MAAM,KAAKgI,SAAL,EAArC,CADF;AFpB2B,ADsBnB3I,AGAT,ADfCgF,EAAAA,EDPwE,EAA5E,ADsBYhF,ECtBoE,CCOrE,CAACiF,GFeO,AEff,CFegB3E,AEfJ,YAAZ,EAA0B+E,IAA1B,CFeQ,CAA4B,SAA5B,EAAuC9E,OAAvC;ACrBR,ADsBQP,AEfR,AEkBQ,MJHAA,ECtBFA,CCOC8E,CEkBK4E,GJHG,CAACpJ,CCtBH,GAAG+C,ACOA,CAACzC,GEkBO,CFlBjB,AEkBkB+I,CFlBFhG,EAAD,CDPG,CAACL,ECOI,AEkBlB,EHzBI,CAAeP,ADsBvB,CAA4B,CIGC,EHzBrB,EAAqBC,EDsB7B,EAAqCxC,GCtB7B,AGyBR,CHzBR,CDsBQ,AIG0C;AHxBlD,ADsBK,AGAPkI,ADfM,AEkBQ1D,EDHd0D,GHHM,GCnBEnF,AGyBMyB,EFlBF/D,EAAE,GAAG0C,AEkBI,CAACsB,CFlBH,CAAC/C,CDPD,AEsBF,ACGH,CAAY,EHzBJ,AEsBF,ODfH,CAAekD,EAAf,EAAmB,SDPTpF,ECOV,CAAX,EEkBQ,EHzBQ,CAApB;AEuBA,ADfI,AEkBK,OAFD,EDDHiI,CDfKxD,GEkBK,EFlBA,GAAGxD,EAAE,CCepB,ADfqBY,CCeHiH,SAAlB,CAA4BC,ADfV,CAAe3D,EAAf,CAAd,ECeJ,CAAmC,QAAnC;AFtBA,ADsBI,AGCJ,ADfIX,AEkBQO,IFlBRP,EDRAvB,EG0BQ8B,CDHPiD,ADfI,CFcC1H,AEdA+E,GDRV,ACQI,CAAUD,CDRD,AG0BM,CAACJ,CJJH,CEdb,CEkBQ,CJJQ,AIII,CDHxB,CAAkB6D,IHDQ,KGC1B,CAA4B/D,QAA5B,CAAqC,MCGzB,EDHZ,IACI,KAAKkD,YAAL,CAAkBa,SAAlB,CAA4BE,MAA5B,CAAmC,OAAnC,CADJ,GAEI,KAAKf,YAAL,CAAkBa,SAAlB,CAA4BG,GAA5B,CAAgC,OAAhC,CAFJ;AFtBIjJ,ADsBIG,AGGR,ADjBI,AEkBK,IH1BLH,EDsBIG,GGGHyH,EFzBM,ACQA3G,CDRCN,CDsBG,AEdF,CFcGF,AEdFW,IFcM,CAACpB,GEdjB,CCiBJ,CAAoB8I,EHHQ,CAACpI,CCtBzB,CAAyB,IDsBT,AGGpB,CHHe,AGGeqI,CHHtB,KGGR,CAAqC,GFzBjC,EAA2CvF,GEyB/C,EFzB8C,IAAW;AACjDN,ADsBA7C,AGGR,ADjBC,AEkBI,GFvBE,CAAP,CEeI,CHlBI6C,ADsBA7C,GGGH6H,IFzBU,CAAC,ADsBA,cGGhB,CAAyBY,MFzBJ9I,GEyBrB,CAAmC+I,GFzBP,CAACrI,EEyB7B,CAA0C,GFzB1B,CAAD,EAAuB8C,EEyBtC,GFzB2C,CAACC,UAA7B,EAAyCD,KAAK,CAACE,UAA/C,EAA2D,qBAAK1D,OAAO,CAACkC,WAAb,CAA3D,CAAP;AACH,ADsBA,AGGN,ADjBF,AEmBOgH,IAAAA,CH7BA,ADqBA,aIQc,GAAG,IAAjB;AH1BH,AG2BA;AJLG,AGINP,ADnBD,AEqBA,CAjBD,CDeEA,ECIF,MJRcnI,CGIH,GAAG,CHJK,GAAG,MAAM;ACrBxB,ADsBQJ,AGIR,MF1BI6C,ADsBI7C,GGIHgI,GHJS,CCtBd,ADsBepI,ECrBXA,AEyBJ,CAAY8I,IHJU,CAACtI,CCrBZ,CAACG,EEyBZ,CHJc,AGIQoI,CHJd,KGIR,CAA6B,MFzBzB,AEyBJ,CFzB6B,SAAzB,EAAoC,MAAM9F,OAAO,EAAjD;AACJM,ADqBQlD,AGIR,ADnBG,AEsBP,EH5BIkD,IDqBQlD,GGIHgI,ACGAuB,IH5BM,CACNhJ,ADoBW,CEfE2E,CCmBlB,CAAauD,CFzBb,CACWnF,EAAD,IAAQ,CEwBlB,ADnBG,CCmBoBoF,ADnBO3D,EAA3B,EAA+B,ECmBlC,CAA8B,CCGlC,GAAsC,IDHlC;AFvBI,ADoBC,AGIL,ADnBA,AEsBA,KJVI,CIUA,EH3BIhC,CEwBH+E,ADnBErD,SDLH,ACKY,CACXlE,CDLG+C,EAAE,CAAChD,ACIJ,CACG,CEqBakJ,CDHvB,CAAuBf,ODlBHnF,AEqBpB,EDHA,ADlBU,AEqBwB,CDHDoB,CDlBT,CDLhB,CAAoB,KEuB5B,CAA0C,CFvBlC,EAA6B,KEuBrC,CFvB2C3B,GEwBvC,KAAK+E,EFxB4C,EAA7C,aEwBJ,CAAuBW,SAAvB,CAAiCE,MAAjC,CAAwC,QAAxC,CADJ,GAEI,KAAKb,iBAAL,CAAuBW,SAAvB,CAAiCG,GAAjC,CAAqC,QAArC,CAFJ;AFtBI,AEyBL,ADpBS,AEqBJ,QH1BI9F,ACKIlC,EAAE,AEqBJ6I,GFrBOnG,EAAE,CDLf,ACKgBzB,CEqBH,CHzBTyB,EAAE,AGyBU,CHzBThD,MCIM,CAAeyE,EAAf,EAAmB,KDJ5B,CAAoB,ICIX,CAAT,UDJA,EAAqC,MAAMjC,QAAQ,EAAnD;AACP,ADiBGnD,AEbI,AEqBA+J,GH/BR,CDuBI/J,CChBCe,CGwBGgJ,EFrBItF,EDVZ,AG+BY,CHxBD,ADgBA,CAAC9D,AIQE,CFrBG,GAAGM,CDHH,CAAG,ACGE,CDVtB,ACUuBY,SFanB,CAAyB,CEbT,CAAeuD,EAAf,CAAZ,IFaJ,EAAoC7E,OAApC,sBIOgB;AHtBpB,ADgBIP,AG5CY,AD+BR,AEqBAgK,IJRJhK,EIQIgK,GHxBDzG,CGwBK,CJRD,AEbIkB,CFaH9D,AIQE,IFrBM,CAAC6E,GDHrB,GCGe,EAAP,GFaJ,CAAyB,OAAzB,EAAkChF,KAAlC,KIMgB;AHrBvB,ADgBI,AEbI,AEqBGyJ,GJvBQ,AEHT,CFGP,AEHA,EE0BQA,KAAK,EAAE,6BAHK;AHpBxB,ADgBIhK,AEbH,AEqBWiK,EJRRjK,IIQQiK,GJRD,AIQI,CJPNtJ,CIOQ,GJRb,CACWC,CIGS,IJHV,IAAW;AChBzB,ADiBQ,AIOIsJ,MAAAA,IAAI,EAAE,OALM;AHlBxB,ADiBQ,AEdD,AEqBKC,MAAAA,OAAO,EFrBG3E,AEqBD,CAAC,GAAD,EAAM,EFrBpB,AEqBc,CFrBUC,CEqBA,EFrBxB,CEqBc,CFrBeC,AEeZ,GFfjB,EAAkClB,KAAlC,EAAyC;ADFhD,ADiBQ,AEdJO,AEoBiC,EFpBjCA,MFcQnE,CEdD,CAACoE,GFcK,AEdb,CAAY,WFca/F,IEdzB,KFcI,EAAgC;AChBxC,ADiBYO,AEdR,AEoBQ4K,MJNA5K,AIMA4K,GFpBD,CAAC,CEoBK,EAAE,GFpBDvF,MFcU,CAAChE,EEdlB,CFcC,CAAqBD,AEdJyE,GAAlB,CAAsBb,CFcrB,EAA4BzE,EEd7B,EAA6B2F,GFc5B,AEdD,EAAkCD,GAAlC,CAAP,EEaoB;AJEf,AEdR,AEoBW4E,KJXa,CAMjB,AIKIA,GAAG,EAAE,sBARO;AAQiB;AHvBzC,ADmBK,AEdE,AEmBKC,GJbR,EASKxJ,CIIGwJ,GHxBH3G,CDWL,CASW,GIIK,CFnBEgC,CEmBA,CHxBtB,ADoBqB,CCpBH7C,ADoBM,CATpB,CIIoB,CJrBW,CCMnC,ADqBI,AEhBG,CAAuB2C,CDLN,ECKjB,EAA4BjB,KAA5B,EAAmC;ADLhBxB,ADsBtB,AEhBA,AEmBQoC,EHzBcpC,IGyBdoC,IAAI,EAAE;AHzBM,ACOpB,AEmBYmF,IH1BsB,EAAtC,EAA0C,AG0B1BA,CFnBL,CAAC,MAAM1F,KEmBW,EAAE2F,EFnBpB,EAAkBlJ,AEmBM,CAACmJ,EFnBzB,CAAsBjG,AEmBF,EADb,GFlBP,EAA6BiB,GAA7B,CAAP;ADNA,ADsBA5F,AEfH,AEmBe6K,EJJZ7K,MCtBME,AG0BM2K,OH1BC,GAAGtH,AG0BM,EAAE,GJJH,CAACvC,GCtBG,ADsBzB,CCtB0B+C,ADsBA5D,OAA1B,EAAmCD,KCtBnB,CAAyB+C,CDsBzC,GCtBgB,CAAhB;AACA,ADsBA,AICc,MHvBVE,CGagB,EJSbhD,ICtBP,EACID,CDqBJ,MCrBW,CAACW,gBAAR,CAAyB,SAAzB,EAAoC,MAAMsC,OAAO,EAAjD;AACJ,ADqBH,AEfM,AEmBK2H,MAAAA,GHzBD,IGyBQ,EFnBG/E,AEmBD,CACL,SFpBT,CAA0BpB,IDNjBzE,CCMT,EAAiC,IDN7B,EAAcY,IAAd,CAAmB,MAAMgB,SAAzB,CAAP;AACH,ACMG,AEmBciJ,QAAAA,CFnBP,CAAC,IEmBY,EFnBN/F,AEmBQ,SFnBf,AEmBK,EFnBae,UAAlB,CAA6BpB,KAA7B,CAAP;AFeJ,AEdC,AEkBoCqG,QAAAA,CJJ5B9J,IIIiC,EAAE,MAA5B,kBJJhB,CAAwCC,EAAxC,EAA4C;ACnB5C,ADoBI,AIGgD+I,MHvB9ClG,EGuB8CkG,IAAI,EAAE,GHvBzC,GAAG,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,YAA5B,EAA0C,OAA1C,CAApB;AACA,ADoBI,AEdG,AEgBS,MHtBVjG,ADoBEpE,CICa,EAEL,MFjBMmG,GDNJ,GAAG,CAAC,EDoBI,CAAC5E,AEdpB,CAA0BuD,CDNZ,CDoBb,CCpBqB,ADoBExD,EAAvB,AEdD,CFcH,CEdoCyE,CDNnB,ADqBb,ECrB4B,ACM7B,EAAsC,MDNxB,EAAyB,OAAzB,CAArB;AACA,ADqBI,AEfAV,AEgBc6F,EFhBd7F,IDNEhB,EDqBI7C,AICQ0J,CFhBP,CAAC5F,EFeE,CEfV,CAAY,AEgBQ,CJDP,CICS,GHtBP,ADqBE/E,GCrBC,EGsBN,EHtBU+D,ADqBT,CAAY,CAAC9D,AEf1B,CDNkB,EAAtB,IDqB6B,EAAUC,MAAV,KAAqB;AAC1C,AEfJ,AEegC0K,QAAAA,CFfzB,CFeGzK,AEfF,GEe6B,EAAE,CFfzByE,EFeI,GAAG,EIAT,EFfL,EFeoB,AEfFiB,MAAlB,CAAyBtB,KAAzB,EAAgCiB,GAAhC,CAAP;ADNJ,ADsBYzE,AEfX,AEcoD+I,MJCzC/I,EAAE,AIDuC+I,CHrB5C9F,ADsBM5D,GID0C,EAAE,IHrB3D,CAAmBkB,MAAnB,EAA2BC,CDsBf,CAAuB,ECtBnC,EAAiC,MDsBrB,EAAmCL,QAAnC;ACrBR,ADsBQH,AIFI,MHpBR,ADsBIA,CIJS,CHlBXO,ADsBI,CAAClB,KCtBC,YAAYvB,EDsBhB,CAAuB,OAAvB,CCtBF,CDsBkCyB,GCrBpC,EAAEiB,ADqBE,ICrBE,IAAID,MAAV,CADE,IAEF,OAAOC,IAAP,KAAgB,QAFhB,CAAJ,EAE+B;AAC3B,ADoBIR,AEfL,AEJiB,KAAhB,CJmBIA,EAAE,CAACX,MEfO0F,UAAf,CAA0BvB,EFerB,CAAuB,EEf5B,EAAiC,GFe5B,EAAgCjE,KAAhC;ACnBP,ADoBI,AEfL,AEcIqJ,IAAAA,CJHA,QIGS,CAACkB,aAAV,CAAwBC,KAAxB,CACKpK,IADL,CACUqK,KAAK,IAAI;AFdvB,AEeYA,MAAAA,GFfL,CAAC,CEeS,CAACC,IFfJpG,SAAP,EAAkBmB,CEeb,CAAuB,GFf5B,CAAwBxB,KAAxB,CAAP,gBEeY,EACIqF,OADJ;AHpBZ,ADoBI,AEdP,AEgBY,EFdb,GEUQ,CHlBA9F,IDoBM5C,QAAQ,CCpBD,CAACG,CDoBG,ECpBjB,CAAkBE,GDoBK,CCpBvB,CAAJ,EACI,OAAOuC,aAAa,CAACzC,GAAd,CAAkBE,IAAlB,CAAP;AACJ,ADmBQtB,AIEP,MJFOA,ECnBFgE,KDmBS,SCnBK,GAAG1C,IAAI,CAAC2C,OAAL,CAAa,YAAb,EAA2B,EAA3B,CAAvB;AACA,ADmBQ/D,AIEX,MJFWA,ECnBFgE,MDmBU,ECnBF,GAAG5C,IAAI,KAAK0C,cAA1B;AACA,ADmBK,AEdF,KFWC,GChBEG,CCKM4B,MDLC,GAAGnC,YAAY,ACKzB,CDL0BvB,ACKK2D,QDLlB,CAAsBhC,GCKnC,EAA6C,SDLhC,CAAhB;ACMA,AEgBJ,MFhBQiC,GEgBC+E,IFhBM,GAAG,IAAI9E,MAAJ,CAAW,CAAC,IAAIF,CEgBlC,GAAoC,QFhBU,CAACG,MAAb,GAAsB,CAA3B,IAAgC,CAA3C,CAAd;ADLA,ADmBI,AEbJ,AEgBA,MFhBIC,AEgBA,CHrBJ,CGqBM,EJHI/F,EEbA,GFaK,AEbF,CAAC2F,EFaI,MAAM,GIGC0D,CFhBC,GAAGzD,KEgBzB,CAAJ,CFhBa,CEgBwB,CFfhChC,OADQ,CACA,KADA,EACO,GADP,EAERA,OAFQ,CAEA,IAFA,EAEM,GAFN,CAAb;ADJA,ADkBQhE,AEVR,AEaI4E,IHrBFb,AGqBEa,EJHI5E,AEVJoG,KEaO,CJHG,AIGFvB,CJHGhE,AEVJ,EFUM,AIGb,CJHcT,AEVJiG,AEaE,EHrBA,GDkBD,CClBK,ACQA,CDRCpC,ACQAqC,AEajB,EJHuB,EEVb,CAAYH,CFUKlF,EClBF,GAAGpC,ACQlB,CAAd,MFU2B,CClBE,ADkBe,GClBDD,SDkBhB,EAA+B,GClBtC,EAAuCK,ODkBhC,CAAb,CClBd,ADkBQ,KCjBJ,EAAEiF,OAAO,IAAIR,WAAW,CAACtB,QAAZ,CAAqB2B,cAArB,CAAb,CAHJ,EAGwD;AACpD,ADiBI9D,AEVR,AEaI,MJHIA,AEVJsG,QFUY,GEVD,GAAG,IAAIC,UAAJ,CAAeJ,OAAO,CAACF,MAAvB,CAAlB;ADNC,ADiBI,AIGJ,KJNG;AENJ,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,OAAO,CAACF,MAA5B,EAAoC,EAAEO,CAAtC,EAAyC;ADPzC,ADiBI5F,AETA0F,AEaJ,IJJI1F,AETA0F,EFSE,AIIFyE,CJJGzK,CCjBD4D,MAAM,CCQG,CAACsC,CDRD,ACQA,CAAX,AEaJ,GFbqBL,EFSjB,CAAoB,IETI,CAACM,IDREtC,CDiB3B,EAAgCpD,GETf,CAAmByF,CAAnB,CDRN,ACQX,EDRsC,ADiBtC,GCjByCzE,IAA9B,EAAoC;AAC/C,ADiBAnB,AETH,AEaD4I,EAAAA,EJJI5I,EAAE,CAACN,IIIE,CAACoK,WJJN,CAAoB,CIIxB,CAAwBC,KJJpB,AIIJ,CACKpK,CJL4BJ,GIIjC,CACUyK,CJLN,IIKW,IAAI;AHrBf,ADiBAhK,AIKImK,IJLJnK,AIKImK,EJLF,CAACzK,GCjBGM,EAAE,GAAG,CGsBK,GAAGgK,CHtBH/I,GDiBhB,CAAoB,AIKhB,OHtBO,ADiBX,CCjB4BsC,CDiBChE,KAA7B,GCjBW,EAA4B8D,OAAO,GAAG,WAAH,GAAiB,UAApD,CAAX;AACA,ADiBH,AEVD,AEeQ,GJtBK,CAAb,CAJwC,CAsBxC,EClBQ9C,CCODmF,EEeQsE,GHtBD,EGsBM,CHtBHhK,AGsBIoK,EHtBF,CAAC5G,ACOpB,KDPI,GGsBW,CAAkB6G,eAAlB,EAAP;AHrBJ,ACOP,AEeQ,EFbT,CESI,EAKK1K,GHvBGyD,CGkBR,CAKUkH,GAAG,GHvBT,CGuBa,CHtBT/J,MAAM,GAAGA,MAAM,CAACkD,KAAP,CAAatC,IAAI,CAACuC,KAAL,EAAb,CAAT,CAL2C,CAM/C;AACA,ADeJhF,AIMQ,EJNRA,kBAAkB,CAACmB,GAAnB,CAAuBG,EAAvB,EAA2BE,IAA3B;ACdI,ADeP,AIMW,QAAIoK,GAAG,KAAK,IAAZ,EAAkB;AHpBtB,ACKD,AEgBS,SFhBAxE,aAAT,CAAuBC,OAAvB,EAAgC;ADJ/B,ADcR,AETI,AEgBY,IJPZ1F,EETI2F,MEgBcuE,IFhBJ,CFSD,EETI9E,CFSD,GETK,CAACM,EEgBU,GAAG,EFhBN,CAACE,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAArB,wEEgBY;AJNZ3F,AETA,AEgBY,EJPZA,GAAG,CAACC,AETA2F,MFSD,AIOesE,EJPNhK,EETE,EFSX,CETcuF,CFSCtF,METM,CAACwF,CFStB,EAAyB,EETX,CAAc,EEgBU,CFhBxB,EAAmB,AEgBQ,CFhB3B,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,CAAjB,MEgBkEsE,cAAtB,CAAhC,CAHc,CAKd;AHvBR,ADeA,AETJ,MAAIpE,EFSI5F,AETF,GDNK,ACMF,CDNG,EDeE,CETD6F,GDNKnH,OAAO,CAAC0E,ADeAzF,AETjB,CAAgB8H,EDNP,CAAY,CACtBzF,MAAM,ACKqB,CDLpB2C,ACKqBmC,EFShC,EAAsC,EETjC,CAAT,ODLc,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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { openDB } from 'idb'\r\n\r\n// INDEXED DB\r\nconst dbPromise = openDB('posts-store', 1, {\r\n    upgrade(db) {\r\n        if (!db.objectStoreNames.contains('posts')) {\r\n            console.log('[Utility JS] : creating the database')\r\n            db.createObjectStore('posts')\r\n        }\r\n        if (!db.objectStoreNames.contains('sync-posts')) {\r\n            // console.log('[Utility JS] : creating the database')\r\n            db.createObjectStore('sync-posts')\r\n        }\r\n    },\r\n})\r\n\r\nexport async function writeData(st, data) {\r\n    console.log('write data', data)\r\n    return dbPromise.then((db) => {\r\n        const tx = db.transaction(st, 'readwrite')\r\n        const store = tx.objectStore(st)\r\n        store.put(data)\r\n        return tx.complete\r\n    })\r\n};\r\n\r\nexport async function readAllData(st) {\r\n    return dbPromise\r\n        .then(function (db) {\r\n            var tx = db.transaction(st, 'readonly')\r\n            var store = tx.objectStore(st)\r\n            return store.getAll()\r\n        })\r\n}\r\n\r\nexport async function setStore(key, val, store) {\r\n    console.log('setting store')\r\n    return (await dbPromise).put(store, val, key)\r\n}\r\n\r\nexport async function getItem(key, store) {\r\n    // console.log('getting store')\r\n    return (await dbPromise).get(store, key)\r\n}\r\n\r\nexport async function getAllKeys(store) {\r\n    return (await dbPromise).getAllKeys(store)\r\n}\r\n\r\nexport async function deleteItem(store, key) {\r\n    console.log('delete store')\r\n    return (await dbPromise).delete(store, key)\r\n}\r\n\r\nexport async function clearStore(store) {\r\n    // console.log('clearing store')\r\n    return (await dbPromise).clear(store)\r\n}\r\n\r\n// CONVERT 64 STRING TO ARRAY\r\nexport function urlBase64ToUint8Array(base64String) {\r\n    var padding = '='.repeat((4 - base64String.length % 4) % 4)\r\n    var base64 = (base64String + padding)\r\n        .replace(/\\-/g, '+')\r\n        .replace(/_/g, '/')\r\n\r\n    var rawData = window.atob(base64)\r\n    var outputArray = new Uint8Array(rawData.length)\r\n\r\n    for (var i = 0; i < rawData.length; ++i) {\r\n        outputArray[i] = rawData.charCodeAt(i)\r\n    }\r\n    return outputArray\r\n}\r\n\r\n// CONVERT BASE64 URL TO BLOB \r\nexport function dataURItoBlob(dataURI) {\r\n    var byteString = atob(dataURI.split(',')[1])\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n    var ab = new ArrayBuffer(byteString.length)\r\n    var ia = new Uint8Array(ab)\r\n    for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i)\r\n    }\r\n    var blob = new Blob([ab], { type: mimeString })\r\n    return blob\r\n}","export class Header {\n  constructor() {\n    this.headerTitleBtn = document.getElementById(\"header-title\")\n    this.headerTitleArrow = document.getElementsByClassName(\"header__title__arrow\")[0]\n    this.headerSocial = document.getElementById(\"header-social\")\n    this.headerTitleBackdrop = document.getElementById(\"header-title-backdrop\")\n    this.headerNavBackdrop = document.getElementById(\"header-nav-backdrop\")\n    this.navBtn = document.getElementById(\"nav-btn\")\n    this.navList = document.getElementById(\"nav-list\")\n    this.navItems = this.navList.querySelectorAll('.main-navigation__item')\n    this.URL = 'http://localhost:9000/api/feed'\n  }\n\n  initHeader() {\n    this.headerTitleBtn.addEventListener(\"click\", () => {\n      this.toggleHeaderTitle()\n    })\n\n    this.headerTitleBackdrop.addEventListener(\"click\", () => {\n      this.toggleHeaderTitle()\n    })\n\n    this.headerNavBackdrop.addEventListener(\"click\", () => {\n      this.toggleNav()\n    })\n\n    this.navBtn.addEventListener(\"click\", () => {\n      this.toggleNav()\n    })\n\n    this.navItems.forEach(item =>\n      item.addEventListener('click', () => this.toggleNav()))\n  }\n\n  toggleHeaderTitle() {\n    this.headerSocial.classList.toggle(\"active\")\n    this.headerSocial.classList.contains(\"active\")\n      ? this.headerSocial.classList.remove(\"iddle\")\n      : this.headerSocial.classList.add(\"iddle\")\n    this.headerTitleBtn.classList.toggle(\"active\")\n    this.headerTitleBackdrop.classList.toggle(\"active\")\n  }\n\n  toggleNav() {\n    this.navBtn.classList.toggle('open')\n    this.navList.classList.toggle(\"active\")\n    this.headerNavBackdrop.classList.contains(\"active\")\n      ? this.headerNavBackdrop.classList.remove(\"active\")\n      : this.headerNavBackdrop.classList.add(\"active\")\n  }\n\n}\n","import { urlBase64ToUint8Array } from './js/utility'\nimport { Header } from \"./js/header\"\n\nlet deferredPrompt\nconst installBtn = document.getElementById('install-app')\nconst askNotificationBtn = document.getElementById('enable-notification')\nconst URL_SUBSCRIPTIONS = 'http://localhost:9000/api/subscription'\n\n// HEADER\nconst header = new Header()\nheader.initHeader()\n\n// SERVICE WORKER\n// if ('serviceWorker' in navigator) {\n//     navigator.serviceWorker.register('/sw.js').then(() => {\n//         console.log('[Index JS] : Service worker registered!')\n//     })\n// }\n\n// DEFERRING THE INSTALLATION\nwindow.addEventListener('beforeinstallprompt', (event) => {\n    // console.log('beforeinstallprompt fired')\n    event.preventDefault()\n    deferredPrompt = event\n    return false\n})\n\n// INSTALL THE APP\ninstallBtn.addEventListener('click', () => {\n    console.log('install the app')\n    if (deferredPrompt) {\n        deferredPrompt.prompt()\n\n        deferredPrompt.userChoice.then((choiceResult) => {\n            console.log(choiceResult.outcome)\n\n            if (choiceResult.outcome === 'dismissed') {\n                console.log('User canceled installation')\n            } else {\n                console.log('User added to home screen')\n            }\n        })\n\n        deferredPrompt = null\n    }\n})\n\n// NOTIFICATIONS\nfunction displayNotificationEnabled() {\n    if ('serviceWorker' in navigator) {\n        const options = {\n            body: 'You successfully subscribed to our Notification Service',\n            icon: '/android-icon-192x192.95830eb1.png',\n            image: '/kalalau-beach.2009ff86.jpg',\n            dir: 'ltr',\n            lang: 'en-US',\n            vibrate: [100, 50, 200], // vibration / pause / vibration / pause / .....\n            badge: '/android-icon-192x192.95830eb1.png',\n            tag: 'confirm-notification', // if set will stack the notifications, they won't show\n            renotify: true,\n            data: {\n                dateOfArrival: Date.now(),\n                primaryKey: 1\n            },\n            actions: [\n                { action: 'confirm', title: 'Okay', icon: '/android-icon-192x192.95830eb1.png' },\n                { action: 'cancel', title: 'Cancel', icon: '/android-icon-192x192.95830eb1.png' }\n            ]\n        }\n        navigator.serviceWorker.ready\n            .then(swreg => {\n                swreg.showNotification('Successfully subscribed!',\n                    options)\n            })\n    }\n}\n\nfunction configurePushSubcription() {\n    if (!('serviceWorker' in navigator)) {\n        console.log('no sw')\n        return\n    }\n\n    let registration\n    navigator.serviceWorker.ready\n        .then(swreg => {\n            registration = swreg\n            return swreg.pushManager.getSubscription()\n        })\n        .then(sub => {\n            // console.log('sub', sub)\n            if (sub === null) {\n                // set new subscription\n                const vapidPublicKey = 'BKQAn_jLHEFQxqLXFttR5diwKyYhZqJ_PjhQhEMlD13jVipfj-pUdnw3rSGioSaDLt4RyP23ShJ6NwoUZy_Ovl0'\n                const convertedVapidPublicKey = urlBase64ToUint8Array(vapidPublicKey)\n\n                // console.log('vapid key')\n                return registration.pushManager.subscribe({\n                    userVisibleOnly: true,\n                    applicationServerKey: convertedVapidPublicKey\n                })\n            } else {\n                // console.log('else')\n                // get subscription\n            }\n        })\n        .then(newSub => {\n            console.log(newSub)\n            return fetch(URL_SUBSCRIPTIONS, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\"\n                },\n                body: JSON.stringify(newSub),\n            }\n            )\n        })\n        .then(response => {\n            if (response.ok) {\n                displayNotificationEnabled()\n            }\n        })\n}\n\nfunction askNotificationPermission() {\n    console.log('ask notif permission')\n    Notification.requestPermission(response => {\n        if (response === 'granted') {\n            console.log(response)\n            configurePushSubcription()\n        }\n    })\n}\n\nif ('Notification' in window) {\n    console.log('notif')\n    askNotificationBtn.classList.add('show')\n    askNotificationBtn.addEventListener('click', askNotificationPermission)\n}"]}