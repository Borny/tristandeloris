{"version":3,"sources":["../node_modules/idb/build/esm/wrap-idb-value.js","../node_modules/idb/build/esm/index.js","js/utility.js","sw.js"],"names":["instanceOfAny","object","constructors","some","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBTransaction","getCursorAdvanceMethods","prototype","advance","continue","continuePrimaryKey","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","Promise","resolve","reject","unlisten","removeEventListener","success","error","wrap","result","addEventListener","then","value","set","catch","cacheDonePromiseForTransaction","tx","has","done","complete","DOMException","idbProxyTraps","get","target","prop","receiver","objectStoreNames","undefined","objectStore","replaceTraps","callback","wrapFunction","func","transaction","storeNames","args","call","unwrap","sort","includes","apply","transformCachableValue","Proxy","IDBRequest","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","indexedDB","open","openPromise","event","oldVersion","newVersion","db","deleteDB","deleteDatabase","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","method","storeName","store","index","shift","all","oldTraps","dbPromise","contains","console","log","createObjectStore","writeData","st","data","put","readAllData","getAll","setStore","key","val","getItem","getAllKeys","deleteItem","delete","clearStore","clear","urlBase64ToUint8Array","base64String","padding","repeat","length","base64","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","dataURItoBlob","dataURI","byteString","split","mimeString","ab","ArrayBuffer","ia","blob","Blob","type","STATIC_CACHE","DYNAMIC_CACHE","STORE_POSTS","SYNC_POSTS","SYNC_REGISTER_NEW_POSTS","STATIC_FILES","self","waitUntil","caches","cache","addAll","keys","keyList","map","clients","claim","URL","url","indexOf","respondWith","fetch","res","clonedRes","clone","json","response","title","file","match","err","headers","tag","dt","postData","FormData","append","join","picture","sendDataPictureBlob","sendDataPictureURL","body","JSON","stringify","notification","action","close","matchAll","clnts","client","find","visibilityState","navigate","openUrl","focus","openWindow","content","parse","text","options","icon","badge","image","registration","showNotification"],"mappings":";;AGAA;;AAEA,MAAMmJ,YAAY,eAAlB;AACA,MAAMC,aAAa,gBAAnB;AACA,MAAMC,WAAW,GAAG,OAApB;AACA,MAAMC,UAAU,GAAG,YAAnB;AACA,MAAMC,uBAAuB,GAAG,gBAAhC;AHNA,AGOA,MHPMvJ,AGOAwJ,YAAY,CHPC,EGOE,CHPC,AGQlB,CHRmBvJ,MAAD,EAASC,IGOV,EAEjB,MHTkB,KAA0BA,UGO3B,EHPuC,AGUxD,CHVyDC,IAAb,CAAmBC,CAAD,IAAOH,MAAM,MGO1D,EAIjB,IHXuFG,CAA3C,CAAhD,aGOqB,EAKjB,mBALiB,EAMjB,oBANiB,EAOjB,oBAPiB,EAQjB,uBARiB,EASjB,wBATiB,EAUjB,0BAViB,EAWjB,6BAXiB,EAYjB,8BAZiB,EAajB,6BAbiB,EAcjB,yBAdiB,EAejB,qCAfiB,EAgBjB,0BAhBiB,EAiBjB,mBAjBiB,EAkBjB,2BAlBiB,CAArB,EAqBA;AACA;;AH3BA,AG4BAqJ,IH5BIpJ,AG4BA,CAAC+B,gBH5BL,AG4BA,CAAsB,SAAtB,EAAkC6C,KAAD,IAAW;AH3B5C,AG4BI,IH5BA3E,oBAAJ,EACA;AG4BI2E,EAAAA,KAAK,CAACyE,SAAN,CACIC,MAAM,CAAC5E,IAAP,CAAYoE,YAAZ,EAA0B9G,IAA1B,CAAgCuH,KAAD,IAAW;AH5BlD,AELA,ACkCY,SH7BHrJ,oBAAT,GAAgC;AAC5B,AG6BQqJ,IAAAA,KH7BAvJ,AG6BK,CAACwJ,MAAN,CAAaL,SH7BI,GG6BjB,EH5BHnJ,iBAAiB,GAAG,CACjBG,WADiB,EAEjBC,cAFiB,EAGjBC,QAHiB,EAIjBC,SAJiB,EAKjBC,cALiB,CADA,CAAzB;AAQH,AEZD,ACkCS,EHrBT,CGkBQ,CADJ;AD7BJ,ACmCC,CARD,GAUA,EDrCM2F,SAAS,GAAG,iBAAO,aAAP,EAAsB,CAAtB,EAAyB;AACvC5B,EAAAA,OAAO,CAACS,EAAD,EAAK;ADJhB,ADgBA,AEXQ,ACoCRqE,IAAI,CAACrH,GDpCO,CFWHvB,AEXIuE,EAAE,CAAChC,SCoChB,CAAsB,MDpCT,CAAoBoD,GFWjC,AGyBA,EAAmCvB,CHzBA,EEXtB,CAA6B,CCoCR,IAAW,EDpChC,CAAL,EAA4C;AFYhD,AEXQwB,ACoCR,MDpCQA,GFWAnG,IEXO,CAACoG,GAAR,CAAY,WFWQ,KACvBpG,oBAAoB,EEZjB,CFYoB,CACpBK,SAAS,CAACG,SAAV,CAAoBC,OADA,EAEpBJ,SAAS,CAACG,SAAV,CAAoBE,QAFA,EAGpBL,SAAS,CAACG,SAAV,CAAoBG,kBAHA,CADA,CAA5B;ACdJ,ADoBC,AEhBWmE,ACoCRH,EAAAA,IDpCQG,CCoCH,CDpCK,ACoCJsE,CDpCK/C,QCoCX,CACIgD,MAAM,CAACG,CDrCH,CAAqB,ECqCzB,GAAczH,EDrCV,ECqCJ,CAAoB0H,OAAD,IAAa;AFxCxC,ACIS,ACqCG;AFxCZ,ADmBA,AGsBY,MHtBN7I,KGsBaS,OAAO,CAAC0E,GHtBL,AGsBH,CACH0D,EHvBS,IAAI5I,CGuBN,CAAC6I,GAAR,CAAa7C,CHvBJ,EAAzB,AGuB4B,IAAS;AFzCrC,ADmBA,AEhBQ,ACuCY,MHvBd/F,EEhBM,CAACgE,CCuCW+B,CDvCT,CAAC/D,CCuCW,KAAK+F,MHvBR,GAAG,CEhBd,CAAoB3C,CCuCT,CHvBOrF,GGuBiBgG,GDvCnC,ACuCsC,CHvBxB,AEhBe,EFgB1C,EGuBwDiC,QDvC3C,CAAL,EAAiD,ECuCrC,EAAmD;AFzCvE,ADmBA,AEhBY,ACuCY3C,MHvBlBpF,EGuBkBoF,OAAO,CAACC,GAAR,CAAY,UHvBN,GAAG,IAAIvF,CGuBb,EAAgCgG,GAAhC,CHvBS,EAAjC;AClBA,ADmBA,AEhBY/B,ACuCYuE,MHvBlBrI,AEhBM8D,EAAE,ACuCUuE,CDvCThD,KCuCe,CAACa,KHvBX,CGuBI,CAAcL,CHvBf,EGuBC,CDvCZ,CFgBehG,AEhBM,OFgBV,EAAvB,GEhBY;ADFZ,ADmBA,AEhBS,ACuCY,MHvBfI,qBAAqB,GAAG,IAAIJ,OAAJ,EAA9B;AClBA,ACGK,ACuCY,KALD,CADG,CAAP,EFpCHoD,MAAT,CAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;AAAEC,AE4CxB,EF5CwBA,CEkCzB,CADJ,KFjC2B;AAAWC,ADmB1C,AE1B2C,ACqDvC,CDrDc,CDOwBA,ACP1C,ODO+B,ADmBtBnD,AG2BEiI,IAAI,CAACQ,OAAL,CAAaC,GH3BxB,CAA0BzI,CG2Bf,EAAP,IH3BJ,EAAmC;ACnBgBmD,ADoB/C,AG2BH,CAhBD,CF/BmDA,EEiDnD,IH7BUlD,ECpBqB,KDoBd,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;ACpBQgD,ADqBrD,AEfD,EDNsDA,QDqB/C/C,KEfQ8E,GFeA,GAAG,GEflB,CAAyBC,EFeD,AEfxB,EAA6BC,IAA7B,EAAmC;ADNX,ADsBnBrF,AEfRgF,AC2CJgD,ED3CIhD,EDPwE,AEkDxE,CAACrE,CFlDL,ADsBYX,ECtBoE,CCOrE,CAACiF,GFeO,AEff,CFegB3E,AEfJ,OC2ChB,CAAsB,ID3ClB,EAA0B+E,CC2C9B,EAAgC7B,CD3C5B,CFeQ,CAA4B,EG4BT,IAAW,GH5B9B,EAAuCjD,OAAvC;ACrBR,ADsBQP,AEfR,AC2CA,MH5BQA,ECtBFA,AEkDA0I,CD3CC5D,EC2CE,EH5BM,CAACxE,AG4BJ,CFlDC,GAAG+C,ACOA,CAACzC,IAAV,CAAgB+C,EAAD,CDPG,CAACL,ECOI,EDPd,CAAeP,ADsBvB,CAA4B,GCtBpB,EAAqBC,EDsB7B,EAAqCxC,GCtB7B,AEkDhB,CFlDA,CDsBQ;ACrBR,ADsBK,AEfD,KFYA,GCnBE+C,ECOItC,EAAE,GAAG0C,EAAE,CAACzB,CDPD,GAAG,OCOL,CAAekD,EAAf,EAAmB,SDPTpF,ECOV,CAAX,IDPgB,CAApB;ACQI,AC2CJ,MAAIwD,ID3CMiB,CC2CD,CAACzE,GD3CK,GAAGiB,CC2Cd,CD3CgB,AC2CF0H,CD3CG9G,EC2CjB,CAAkB+G,OAAlB,CD3Cc,AC2CYF,CD3CGtD,EAAf,AC2Cd,CD3CA,GC2CiC,CAAC,CAAtC,EAAyC;AFlDzC,ADsBI,AEdAX,AC0CuC,ID1CvCA,EDRAvB,GCQK,CFcC3C,AEdA+E,GDRV,ACQI,CAAUD,CDRD,EDsBI,CEdb,EFcgB,MAAM;ACrBtBrF,ADsBIG,AEdJ,AC0CA6E,IFlDAhF,AEkDAgF,EH5BI7E,KCtBG,ACQAc,AC0CA,CFlDCN,AEkDAsE,CH5BG,AEdF,CFcGxE,AEdFW,CC0CV,CAAY,EH5BI,CAACpB,GEdjB,IFcwB,CAACU,CCtBzB,CAAyB,IDsBT,CAAL,CAAP,SCtBJ,EAA2C8C,AEkD3C,KFlD0C,IAAW;AACjDN,ADsBA7C,AEdP,AC0CGmD,GD/CG,CAAP,AC+CIA,EFlDIN,ADsBA7C,GG4BC,CAACwI,GFlDK,CAAC,ADsBA,OG4BZ,CACIC,KAAK,CAACtF,KAAK,CAACxD,CFnDCA,MEmDR,CFnDe,AEmDpB,CFnDqBU,AEoDhBE,IADL,CACUmI,CFpDF,CAAD,CEoDM,CFpDiBvF,GEoDb,EFpDkB,CAACC,UAA7B,EAAyCD,KAAK,CAACE,UAA/C,EAA2D,qBAAK1D,OAAO,CAACkC,WAAb,CAA3D,CAAP;AACH,ADsBA,AEdR,AC4CmB,KFtDZ,ADqBA;AClBH,AEoDe,YAAM8G,SAAS,GAAGD,GAAG,CAACE,KAAJ,EAAlB;AH9BZ,AEfP,AC8CmB,UH/BNzI,KAAK,GAAG,MAAM,OG+BGoH,WAAX,EACKhH,IADL,CACU,MAAM;AFrDhC,ADsBQR,AGgCgB,MFtDpB6C,ADsBI7C,MAAM,CCtBd,ADsBeJ,ECrBXA,KDqBkB,CAACQ,CCrBZ,CAACG,GDqBE,CAAN,YCrBJ,CAAyB,SAAzB,EAAoC,MAAMsC,OAAO,EAAjD;AACJM,ADqBQlD,AEfL,AC+CqB,EFrDxBkD,IDqBQlD,OCrBG,CACNO,ADoBW,CEfE2E,GDNlB,CACW5B,EAAD,IAAQ,CCKf,CAA2ByB,EAA3B,EAA+B;ADJ9B,ADoBC,AEfL,AC+CwB,KHnCpB,GCjBIhC,CCKD0B,SDLH,ACKY,CACXlE,CDLG+C,EAAE,CAAChD,ACIJ,CACG,UAAUgD,EAAV,EAAc,CDLhB,CAAoB,OAApB,EAA6B,MAAMP,UAAU,EAA7C;AACJ,ACKI,AC8CgB,QFnDhBD,ACKIlC,EAAE,GAAG0C,EAAE,AC8CYqF,CFnD3B,ACKgB9G,EDJZyB,EAAE,CAAChD,GEkD6B,CAACuI,ED9CxB,CAAe9D,CC8CD,CD9Cd,CC8CO,CD9CY,KDJ5B,CAAoB,ICIX,CAAT,UDJA,EAAqC,MAAMjC,QAAQ,EAAnD;AACP,ADiBGnD,AEbI,AC8Ca,GFxDrB,CDuBIA,CChBCe,EE2CW,CDxCJ0D,CC+CS7D,CFzDrB,CAOW,ADgBA,CAACD,CEbK,ACwCD,CAOUwI,ED/CNlI,CDHH,CAAG,ACGE,CDVtB,ACUuBY,GC+CW,IAAI,EHlClC,CAAyB,CEbT,CAAeuD,EAAf,CAAZ,IFaJ,EAAoC7E,OAApC;ACfJ,ADgBIP,AEbI,AC+CgBgF,IHlCpBhF,IGkCoBgF,CFlDjBzB,EDgBI,AEbIkB,CFaH9D,GGkCmB,CD/CX,AC+CYsE,CD/CXO,EC+CG,CFlDxB,AEkDoC,GD/CrB,EAAP,GFaJ,CAAyB,OAAzB,EAAkChF,KAAlC,MGkCoB,EAA2C2I,QAA3C;AFjD3B,ADgBI,AEbI,GFFW,AEHT,CFGP,AEHA;ADGJ,ADgBIlJ,AEbH,AC8C2B,EHjCxBA,OAAO,CACFW,GGgCwB,CHjC7B,CACWC,EGgCsB6E,GHhCvB,AGgCc,IHhCH,AGgCmByD,QAAQ,CAAC9D,IAAzB,EAA+B;AFhD3D,ADiBQ,AGgCwB;AFhDhC,ADiBQ,AEdD,AC8CyB,eD9CVI,QAAf,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkClB,KAAlC,EAAyC;ADFhD,ADiBQ,AEdJO,AC8C4B,ED9C5BA,MFcQnE,CEdD,CAACoE,GFcK,AEdb,CAAY,WFca/F,IEdzB,IC8CqCiK,CHhCjC,EAAgC,KGgCS,CAAC9D,IAAT,CAAcK,GAAd,EAAmB0D,KAA5B,EAAmCD,QAAQ,CAAC9D,IAAT,CAAcK,GAAd,CAAnC,EAAuDkC,WAAvD;AFhDhC,ADiBYnI,AEdR,AC8CyB,MHhCjBA,GEdD,CAAC,MAAMqF,MFcU,CAAChE,EEdlB,CFcC,CAAqBD,AEdJyE,GAAlB,CAAsBb,CFcrB,EAA4BzE,EEd7B,EAA6B2F,GFc5B,AEdD,EAAkCD,GAAlC,CAAP;AFeK,AEdR,AC8CwB,KHrCA,CAMjB,CGiBY;AAeA,aAAOqD,GAAP;AFlDpB,ADmBK,AEdE,AC8CU,GHxCb,EASKhI,AGWG,CADJ,GF9BC6C,CDWL,CASW,IEfOgC,EDLtB,ADoBqB,CCpBH7C,ADoBM,CATpB,EAjB+B,CCMnC,ADqBI,AEhBG,CAAuB2C,CDLN,ECKjB,EAA4BjB,KAA5B,EAAmC;ADLhBxB,ADsBtB,AEhBA,AC+CC,EFrDqBA,CE4BtB,MAyBO,IAAI8E,YAAY,CAACrJ,IAAb,CAAkB2K,IAAI,IAAIA,IAAI,KAAK7F,KAAK,CAACxD,OAAN,CAAc2I,GAAjD,CAAJ,EAA2D;AFrD9C,ACOpB,AC8CoE,IFrDlC,EAAtC,EAA0C,CCO/B,CAAC,MAAM7D,SAAP,EAAkBvD,GAAlB,CAAsBkD,KAAtB,EAA6BiB,GAA7B,CAAP;ADNA,ADsBA5F,AEfH,AC8CO,EH/BJA,MCtBME,OAAO,GAAGqD,KDsBK,CAACvC,GCtBG,ADsBzB,CCtB0B+C,ADsBA5D,OAA1B,EAAmCD,KCtBnB,CAAyB+C,CDsBzC,GCtBgB,CAAhB;AACA,ADsBA,AG+BI,MFrDAE,GDsBGhD,ICtBP,EACID,CDqBJ,MCrBW,CAACW,gBAAR,CAAyB,SAAzB,EAAoC,MAAMsC,OAAO,EAAjD;AACJ,ADqBH,AEfM,AC8CCO,IAAAA,KFpDG,AEoDE,CAACqF,KD9CQhD,MC8Cd,CACIqC,GD/CL,CAA0BzD,EC+Cf,CAAC6E,CFrDHtJ,CCMT,EAAiC,CC+C5B,CAAawD,EFrDd,EAAc5C,CEqDK,CAACZ,EFrDpB,CAAmB,IEqDlB,CADJ,CFpD4B4B,SAAzB,CAAP;AACH,ACMG,ACgDC,GANM,MD1CA,ACgDA,CDhDC,MAAMkD,SAAP,EAAkBe,UAAlB,CAA6BpB,KAA7B,CAAP;AFeJ,AEdC,ACgDOjB,IAAAA,KHlCCxC,AGkCI,CAAC6H,WAAN,CACIX,MAAM,CAACoB,KAAP,CAAa9F,IHnCzB,CAAwCvC,AGmCV,CAACjB,CHnC/B,EAA4C,IGmChC,EACKY,IADL,CACUuI,QAAQ,IAAI;AFvDlC,ADoBI,AGoCgB,MFxDdrF,IEwDkBqF,OFxDP,CEwDG,EFxDA,AEwDc,CFxDb,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,YAA5B,EAA0C,OAA1C,CAApB;AACA,ADoBI,AEdG,ACkDiB,MFxDlBpF,ADoBEpE,SEdcmG,ACkDSqD,GFxDb,GAAG,CAAC,CEwDE,CHpCE,CAACjI,AEdpB,CAA0BuD,CDNZ,CDoBb,CCpBqB,ADoBExD,EAAvB,AEdD,CFcH,CEdoCyE,CDNnB,ADqBb,ECrB4B,ACM7B,EAAsC,MDNxB,EAAyB,OAAzB,CAArB;AACA,ADqBI,AEfAV,ACkDiB,EDlDjBA,IDNEhB,CEsDc,CHjCV7C,CEfC,CAAC8D,EFeE,CEfV,ACkDuB,CDlDX,CFeC,ICrBE,ADqBE/E,GCrBC,IAAI+D,ADqBT,CAAY,CAAC9D,AEf1B,CDNkB,EAAtB,IDqB6B,EAAUC,MAAV,KAAqB;AAC1C,AEfJ,ACkDoB,SDlDb,CFeGC,AEfF,KCkDmByI,CDlDbhE,EFeI,EGmCc,CHnCX,AGmCYtB,IDlD1B,CCkD+B,CHnCX,AEfFuC,ACkDc/F,MDlDhC,CAAyByE,ACkDA,CAAL,CACF7D,GDnDlB,CCkDoB,CDlDY8E,ACmDTqD,GDnDvB,ACmD0B,CDnDjC,GCmDqC;AFzDzC,ADsBY9H,AEfX,ACmD+B,MHpCpBA,EAAE,CCtBLiD,ADsBM5D,QGoCwB4H,CF1DvC,CAAmB1G,IE0D0B,CAAC8B,CF1D9C,EAA2B7B,CDsBf,AGoC2B,CHpCJ,AGoCgBkG,EF1DnD,EAAiC,MDsBrB,EAAmCvG,CGoCR,EACFR,IADE,CHpC3B,AGqC8BuH,KAAK,IAAI;AF1D/C,ADsBQlH,AGqC4B,MF3DhC,ADsBIA,ECtBFO,ADsBI,CAAClB,KCtBC,YAAYvB,EDsBhB,CAAuB,OAAvB,CCtBF,CDsBkCyB,GCrBpC,EAAEiB,ADqBE,ICrBE,IAAID,MAAV,CADE,IAEF,OAAOC,IAAP,KAAgB,QAFhB,CAAJ,EAE+B;AAC3B,ADoBIR,AEfL,ACoDiC,MHrC5BA,EAAE,CAACX,MEfO0F,ICoDyB+C,GAAP,GDpDjC,CAA0BtE,EFerB,CAAuB,EEf5B,EAAiC,GFe5B,EAAgCjE,KAAhC;ACnBP,ADoBI,AEfL,ACoDiC,KHzC7B,MGqC+B,CAAP;AD/C5B,ACoDyB,SDpDlB,AC6CoB,CD7CnB,CCqDiBO,KDrDX+D,AC6Ca,CAQIyE,GAAG,IAAI,CDrD/B,EAAkBtD,KAAlB,CAAwBxB,KAAxB,CAAP;ADLA,ADoBI,AEdP,ACqD+B,EDnDhC,IDRQT,IDoBM5C,OGuCyB8G,CHvCjB,CCpBD,CAAC3G,CDoBG,ECpBjB,AE2DqC,CF3DnBE,AE2DoB6B,GHvCf,CCpBvB,AE2D+B,CF3DnC,AE2D+CoE,EF1D3C,OAAO1D,GE0DwB,EACFpD,IADE,CACGuH,GF3Dd,CAAC5G,CE2DkB,EF3DhC,CAAkBE,CE2DkB,GF3DpC,CAAP;AACJ,ADmBQtB,AGwC4B,MHxC5BA,ECnBFgE,KDmBS,SCnBK,GAAG1C,IAAI,CAAC2C,OAAL,CAAa,YAAb,EAA2B,EAA3B,CAAvB;AACA,ADmBQ/D,AGwC4B,MHxC5BA,ECnBFgE,MDmBU,ECnBF,AE2D0Bb,GF3DvB/B,EE2D4B,CAACzB,CF3DzB,KAAKmE,CE2Dc,CAAcqF,OAAd,CAAsBjI,GAAtB,CF3DxC,AE2DkE,QAA1B,KAAuCiC,KAAK,CAACxD,OAAN,CAAcwJ,OAAd,CAAsBjI,GAAtB,CAA0B,QAA1B,EAAoCiB,QAApC,CAA6C,WAA7C,CAA3C,EAAsG;AF1D1I,ADmBK,AEdF,ACsDqC,KH3CpC,GChBE8B,CCKM4B,MDLC,GAAGnC,GE2D+BoE,KAAK,CAACmB,GF3DzB,ACKzB,CDL0B9G,ACKK2D,CCsDa,CAAY,MF3D3C,CAAsBhC,GCKnC,EAA6C,SDLhC,AE2D+B,CF3D/C,AE2DwC;ADrDxC,ACsDqC,MDtDjCiC,OAAO,GAAG,IAAIC,MAAJ,CAAW,CAAC,IAAIF,YAAY,CAACG,MAAb,GAAsB,CAA3B,IAAgC,CAA3C,CAAd;ADLA,ADmBI,AEbJ,ACsDiC,MDtD7BC,CDLJ,GDkBU/F,CGmCyB,CDhDzB,ACgDkB,GHnCb,AEbF,CAAC2F,EFaI,MAAM,IEbE,GAAGC,OAAhB,EACRhC,OADQ,CACA,KADA,EACO,GADP,EAERA,OAFQ,CAEA,IAFA,EAEM,GAFN,CAAb;ADJA,ADkBQhE,AEVR,ACmDyB,IF3DvB+D,EDkBM/D,AEVJoG,GCmCuB,CAAP,EHzBN,CAACvF,AEVJ,EFUM,CAACT,AEVJiG,EDRE,GDkBD,CClBK,ACQA,CDRCpC,ACQAqC,EFUM,EEVb,CAAYH,CFUKlF,EClBF,GAAGpC,ACQlB,CAAd,MFU2B,CClBE,ADkBe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","file":"sw.js","sourceRoot":"../src","sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { openDB } from 'idb'\r\n\r\n// INDEXED DB\r\nconst dbPromise = openDB('posts-store', 1, {\r\n    upgrade(db) {\r\n        if (!db.objectStoreNames.contains('posts')) {\r\n            console.log('[Utility JS] : creating the database')\r\n            db.createObjectStore('posts')\r\n        }\r\n        if (!db.objectStoreNames.contains('sync-posts')) {\r\n            // console.log('[Utility JS] : creating the database')\r\n            db.createObjectStore('sync-posts')\r\n        }\r\n    },\r\n})\r\n\r\nexport async function writeData(st, data) {\r\n    console.log('write data', data)\r\n    return dbPromise.then((db) => {\r\n        const tx = db.transaction(st, 'readwrite')\r\n        const store = tx.objectStore(st)\r\n        store.put(data)\r\n        return tx.complete\r\n    })\r\n};\r\n\r\nexport async function readAllData(st) {\r\n    return dbPromise\r\n        .then(function (db) {\r\n            var tx = db.transaction(st, 'readonly')\r\n            var store = tx.objectStore(st)\r\n            return store.getAll()\r\n        })\r\n}\r\n\r\nexport async function setStore(key, val, store) {\r\n    console.log('setting store')\r\n    return (await dbPromise).put(store, val, key)\r\n}\r\n\r\nexport async function getItem(key, store) {\r\n    // console.log('getting store')\r\n    return (await dbPromise).get(store, key)\r\n}\r\n\r\nexport async function getAllKeys(store) {\r\n    return (await dbPromise).getAllKeys(store)\r\n}\r\n\r\nexport async function deleteItem(store, key) {\r\n    console.log('delete store')\r\n    return (await dbPromise).delete(store, key)\r\n}\r\n\r\nexport async function clearStore(store) {\r\n    // console.log('clearing store')\r\n    return (await dbPromise).clear(store)\r\n}\r\n\r\n// CONVERT 64 STRING TO ARRAY\r\nexport function urlBase64ToUint8Array(base64String) {\r\n    var padding = '='.repeat((4 - base64String.length % 4) % 4)\r\n    var base64 = (base64String + padding)\r\n        .replace(/\\-/g, '+')\r\n        .replace(/_/g, '/')\r\n\r\n    var rawData = window.atob(base64)\r\n    var outputArray = new Uint8Array(rawData.length)\r\n\r\n    for (var i = 0; i < rawData.length; ++i) {\r\n        outputArray[i] = rawData.charCodeAt(i)\r\n    }\r\n    return outputArray\r\n}\r\n\r\n// CONVERT BASE64 URL TO BLOB \r\nexport function dataURItoBlob(dataURI) {\r\n    var byteString = atob(dataURI.split(',')[1])\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n    var ab = new ArrayBuffer(byteString.length)\r\n    var ia = new Uint8Array(ab)\r\n    for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i)\r\n    }\r\n    var blob = new Blob([ab], { type: mimeString })\r\n    return blob\r\n}","import { setStore, clearStore, getAllKeys, getItem, deleteItem, readAllData } from './js/utility'\n\nconst STATIC_CACHE = `static-013`\nconst DYNAMIC_CACHE = `dynamic-006`\nconst STORE_POSTS = 'posts'\nconst SYNC_POSTS = 'sync-posts'\nconst SYNC_REGISTER_NEW_POSTS = 'sync-new-posts'\nconst STATIC_FILES = [\n    '/index.html',\n    '/pages/offline.html',\n    '/manifest.webmanifest',\n    '/main.1f19ae8e.js',\n    '/home.5fd3cac8.js',\n    '/main.48b3db1d.css',\n    '/home.5fd3cac8.css',\n    '/favicon.26242483.ico',\n    '/maunakea.3693c564.jpg',\n    '/bx-rooftop.02bed6fe.jpg',\n    '/kalalau-beach.2009ff86.jpg',\n    '/hourtin-sunset.7c4dd7fb.jpg',\n    '/crater-center.cb31532d.jpg',\n    '/pamukkale.f0c4f7c3.jpg',\n    '/rail-road-down-center.01d9c3c2.jpg',\n    '/belaetcome.c74832df.png',\n    '/ics.ccad7778.png',\n    '/lacleduquai.9d6d72d6.png'\n]\n\n// INSTALL\n// console.log('[Service Worker]')\nself.addEventListener('install', (event) => {\n    // console.log('[Service Worker] Installing service worker ...', event)\n    event.waitUntil(\n        caches.open(STATIC_CACHE).then((cache) => {\n            // console.log('[Service Worker] Precaching app shell (index.html,css.js...) ...', event)\n            cache.addAll(STATIC_FILES)\n        })\n    )\n})\n\n// ACTIVATE\nself.addEventListener('activate', (event) => {\n    // console.log('[Service Worker] Activating service worker ...', event)\n    event.waitUntil(\n        caches.keys().then((keyList) => {\n            // console.log('[Service Worker] keyList :', keyList)\n            return Promise.all(\n                keyList.map((key) => {\n                    if (key !== STATIC_CACHE && key !== DYNAMIC_CACHE) {\n                        console.log('removed cache : ', key)\n                        caches.delete(key)\n                    }\n                })\n            )\n        })\n    )\n    return self.clients.claim()\n})\n\n// FETCH\nself.addEventListener('fetch', (event) => {\n    const URL = 'http://localhost:9000/api/feed'\n\n    if (event.request.url.indexOf(URL) > -1) { // storing json data using indexedDB\n        console.log('[Service Worker] : IndexedDB')\n        event.respondWith(\n            fetch(event.request)\n                .then(res => {\n                    // console.log('[Service Worker] : IndexedDB =>', res.json())\n                    const clonedRes = res.clone()\n                    clearStore(STORE_POSTS)\n                        .then(() => {\n                            // setStore(response.data[key])\n                            // .then(() => console.log('It worked!'))\n                            // .catch((err) => console.log('It failed!', err))\n                            return clonedRes.json()\n                        })\n                        .then(response => {\n                            console.log('[Service Worker] : response', response)\n                            for (let key in response.data) {\n                                // console.log('[Service Worker] : key:', response.data[key])\n                                // console.log('[Service Worker] : key id:', response.data[key].id)\n                                setStore(response.data[key].title, response.data[key], STORE_POSTS)\n                            }\n                        })\n                    return res\n                })\n        )\n    } else if (STATIC_FILES.some(file => file === event.request.url)) { //\n        // console.log('[Service Worker]: Fetching and caching static files ')\n        // console.log('[Service Worker] caches.match :', caches.match)\n        event.respondWith(\n            caches.match(event.request)\n        )\n    } else {\n        event.respondWith(\n            caches.match(event.request)\n                .then(response => {\n                    if (response) {\n                        return response\n                    } else {\n                        return fetch(event.request)\n                            .then(res => {\n                                return caches.open(DYNAMIC_CACHE)\n                                    .then(cache => {\n                                        // cache.put(event.request.url, res.clone())\n                                        return res\n                                    })\n                            })\n                            .catch(err => {\n                                return caches.open(STATIC_CACHE)\n                                    .then(cache => {\n                                        // console.log(event.request.headers)\n                                        if (event.request.headers.get('accept') && event.request.headers.get('accept').includes('text/html')) {\n                                            return cache.match('/pages/offline.html')\n                                        }\n                                    })\n                            })\n                    }\n                })\n        )\n    }\n})\n\n// SYNC\nself.addEventListener('sync', function (event) {\n    // console.log('[Service Worker] Background syncing', event)\n    if (event.tag === 'sync-new-posts') {\n        console.log('[Service Worker] Syncing new Posts')\n        event.waitUntil(\n            readAllData('sync-posts')\n                .then(function (data) {\n                    for (var dt of data) {\n                        // sendDataPictureURL(dt)\n                        // postData.append('id', dt.id)\n                        // postData.append('location', dt.location)\n\n                        // console.log('dt', dt)\n                        const postData = new FormData()\n                        postData.append('title', dt.title)\n                        postData.append('fileName', `${dt.title.split(' ').join('-')}.png`)\n                        postData.append('file', dt.picture)\n                        // console.log('postData', postData)\n\n                        sendDataPictureBlob(postData)\n                            .then(function (res) {\n                                return res.json()\n                            })\n                            .then(response => {\n                                console.log('Sent data', response)\n                                deleteItem('sync-posts', dt.title) // Isn't working correctly!\n                            })\n                            .catch(function (err) {\n                                console.log('Error while sending data', err)\n                            })\n                    }\n\n                })\n        )\n    }\n})\n\nfunction sendDataPictureURL(data) {\n    return fetch(\n        \"http://localhost:9000/api/feed\",\n        {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Accept\": \"application/json\"\n            },\n            body: JSON.stringify(data),\n        }\n    )\n}\n\nfunction sendDataPictureBlob(data) {\n    // console.log('data', data)\n    return fetch(\n        \"http://localhost:9000/api/feed\",\n        {\n            method: \"POST\",\n            // headers: {\n            //     \"Content-Type\": \"multipart/form-data\",\n            //     \"Accept\": \"application/json\"\n            // },\n            body: data,\n        }\n    )\n}\n\n// NOTIFICATIONS\nself.addEventListener('notificationclick', event => {\n    const notification = event.notification\n    const action = event.action\n\n    // console.log(notification)\n\n    if (action === 'confirm') {\n        // console.log('notif confirm ')\n        notification.close()\n    } else {\n        // console.log('notif confirm ')\n        event.waitUntil(\n            clients.matchAll()\n                .then(clnts => {\n                    const client = clnts.find(c => {\n                        return c.visibilityState === 'visible'\n                    })\n                    if (client !== undefined) {\n                        client.navigate(notification.data.openUrl)\n                        client.focus()\n                    } else {\n                        clients.openWindow(notification.data.openUrl)\n                    }\n\n                    notification.close()\n                })\n        )\n    }\n})\n\nself.addEventListener('notificationclose', event => {\n    console.log('notification was closed', event)\n})\n\n// PUSH\nself.addEventListener('push', event => {\n    let data = { title: 'from sw', content: 'worked but no data sent', openUrl: '/pages/feed.html' }\n    if (event.data) {\n        data = JSON.parse(event.data.text())\n    }\n\n    console.log('data push', data)\n\n    const options = {\n        body: data.content,\n        icon: 'favicon.26242483.ico',\n        badge: 'favicon.26242483.ico',\n        image: data.image,\n        data: {\n            // url: data.openUrl\n            url: '/index.html'\n        }\n    }\n\n    event.waitUntil(\n        self.registration.showNotification(data.title, options)\n    )\n})"]}